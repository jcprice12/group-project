<!DOCTYPE html>
<html lang="en">
    <head>
      <meta charset="UTF-8">
      <meta name="viewport" content="width=device-width, initial-scale=1.0">
      <meta http-equiv="X-UA-Compatible" content="ie=edge">
      <link rel="stylesheet" href="css/font-awesome.min.css">
      <link rel="stylesheet" href="css/bootstrap.css">
      <link rel="stylesheet" href="css/style.css">
      <title>Bootstrap 4 Starter</title>
      <style>

      </style>
    </head>
    <body>
    <div class="container">
      <div class="flex-column mb-5 mt-3">
        <div class="col-sm-6 mr-auto ml-auto">
          <label class="sr-only" for="search-recipe"></label>
          <div class="input-group mb-2 mr-sm-2 mb-sm-0">
            <div class="input-group-addon"><i class="fa fa-search"></i></div>
            <input type="text" class="form-control" id="search-recipe" placeholder="Search Recipes">
          </div>
        </div>
      </div>
        <div class="card-columns">

        </div>
    </div>



      <script src="js/jquery.min.js"></script>
      <script src="js/tether.min.js"></script>
      <script src="js/bootstrap.min.js"></script>
    <script>
      const url = 'https://api.edamam.com/search?q=chicken&app_id=87b25c20&app_key=2c3c60c276ca6dfd0780517fe3244719';
      function getCard(title, cals, servings, img){
        let card = `<div class="card card-recipe">
            <img class="card-img-top img-fluid"
                 src="${img}"
                 alt="Card image cap"
                 style="width: 100%">
            <div class="card-block">
              <h4 class="card-title">${title}</h4>
              <i class="fa fa-star"></i>
              <i class="fa fa-star"></i>
              <i class="fa fa-star"></i>
              <i class="fa fa-star"></i>
              <i class="fa fa-star-half"></i>
            </div>
            <div class="card-footer">
              <div class="footer-icons d-flex flex-row justify-content-start">
                <div class="card-calories mr-3">
                  <i class="fa fa-bar-chart-o"></i>
                  <span class="icon-text"><small>${cals} cals</small></span>
                </div>
                <div class="card-cooktime mr-3">
                  <i class="fa fa-clock-o"></i>
                  <span class="icon-text"><small>45 m</small></span>
                </div>
                <div class="card-yield mr-3">
                  <i class="fa fa-pie-chart"></i>
                  <span class="icon-text"><small>${servings} servings</small></span>
                </div>
              </div>
            </div>
          </div>`;
        return card;
      }

      $.get(url, (res) => {
        console.log(res);
        let html = '';
        res.hits.forEach(({recipe}) => {
          console.log(recipe.calories);
          let title = recipe.label;
          let servings = recipe.yield;
          let cals = Math.floor(recipe.calories/servings);
          let img = recipe.image;
          html += getCard(title, cals, servings, img);
        });
        $('.card-columns').html(html);
      })

    </script>
    </body>
</html>
